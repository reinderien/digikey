#!/usr/bin/env python3

from digikey import Session


cat_name_en = 'Resistors/Through Hole Resistors'
cat_name_it = 'Resistori/Resistori da foro passante'
res_en = 'Resistance'
res_it = 'Resistenza'
sess_en_ca = {'country': 'CA'}
sess_it = {'country': 'IT',
           'short_lang': 'it',
           'currency': 'EUR'}

# Change this to change languages
cat_name, res, sess_args = cat_name_en, res_en, sess_en_ca

d, is_new = Session.try_deserialize(**sess_args)
if is_new:
    print('New session created')
    d.init_groups()
else:
    print('Session restored from cache')

cat = d.categories[cat_name]
if is_new:
    cat.init_params()

prods = tuple(cat.search({
    res: {'500 Ohms'}
}))
print('\n'.join(sorted(str(p) for p in prods)))
d.serialize()
